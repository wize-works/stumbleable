# .copilot-instructions.md — **Stumbleable (Frontend Only)**

> Build the **UI-only** Next.js app for *Stumbleable*, a StumbleUpon-style discovery experience. **No backend, no APIs, no auth.** All data comes from local **`/data`** modules and a tiny in-memory service so we can iterate on UX first.

---

## 🎯 Scope
- Implement the **web UI** in `apps/web` (Next.js 15 App Router, TypeScript, Tailwind, DaisyUI, FontAwesome (inline)).

---

## 📁 Required Structure
```
stumbleable/
└─ apps/
   └─ web/
      ├─ app/
      │  ├─ layout.tsx
      │  ├─ page.tsx              # Landing
      │  ├─ stumble/page.tsx      # Stumble screen
      │  ├─ saved/page.tsx        # Saved items
      │  ├─ lists/page.tsx        # Stub
      │  ├─ about/page.tsx        # About
      │  ├─ globals.css
      │  └─ themes/
      │     ├─ light.css
      │     └─ dark.css
      ├─ components/
      │  ├─ Header.tsx
      │  ├─ StumbleButton.tsx
      │  ├─ DiscoveryCard.tsx
      │  ├─ ReactionBar.tsx
      │  ├─ WildnessControl.tsx
      │  ├─ KeyboardShortcuts.tsx
      │  ├─ Toaster.tsx
      │  └─ EmptyState.tsx
      ├─ lib/
      │  ├─ score.ts
      │  └─ utils.ts
      ├─ next.config.js
      ├─ package.json
      └─ tsconfig.json
```

---

## 🧰 Tech & Style
- **Next.js 15 (App Router)**, **TypeScript (strict)**, **Tailwind CSS**.
- Theme via **CSS variables** in `app/themes/*.css` (no Tailwind theme plugin). Tokens: `--color-primary`, `--color-secondary`, `--color-base-100`, `--color-base-content`.
- Icons: **lucide-react** or inline SVG. Keep bundle light.
- Accessibility: keyboard-first controls, ARIA labels, visible focus rings.

---

## 🧭 Pages & Interactions
**Landing `/`**: hero + CTA → `/stumble`.

**Stumble `/stumble`**:
- Top-right controls: `WildnessControl` (0–100) + big `StumbleButton`.
- Display **one** `DiscoveryCard` at a time.
- `ReactionBar` with Like, Skip, Save, Share → calls `recordFeedback` and shows `Toaster`.
- Keyboard shortcuts: `Space` → Next; `ArrowUp` → Like; `ArrowDown` → Skip; `S` → Save; `Shift+S` → Share (add a small `KeyboardShortcuts` legend).
- Local state: `current`, `wildness`, `seenIds`. On next, call `getNextDiscovery` and update state.

**Saved `/saved`**: grid/list of `getSaved()`; `EmptyState` if none.

**Lists `/lists`**: static stub for now.

**About `/about`**: short blurb on serendipity and how Stumbleable works.

---

## 🧱 Components
- **Header**: sticky, nav (Stumble, Lists, Saved, About), active state.
- **StumbleButton**: prominent, includes keyboard hint ("Space").
- **DiscoveryCard**: image (aspect-video), domain chip, title → external link, optional description, topic tags, read time, tiny “Why you’re seeing this” line.
- **ReactionBar**: buttons with icons; call service + toast.
- **WildnessControl**: slider with numeric label.
- **KeyboardShortcuts**: binds keys + popover/tooltip legend.
- **Toaster**: tiny, dependency-free.
- **EmptyState**: friendly placeholder.

---

## 🎨 Styling
- Respect `prefers-color-scheme`; light/dark via `themes/*.css` tokens.
- Rounded-2xl, soft shadows, generous spacing; visible focus rings.
- Mobile-first; ensure tap targets ≥ 40px.

---

## ✅ Acceptance Criteria
1. `npm run dev` serves routes: `/`, `/stumble`, `/saved`, `/lists`, `/about`.
2. `/stumble` loads site/page into iframe; **Space** or **Stumble** advances to a new item; no repeats until pool is exhausted.
3. Like/Skip/Save/Share update in-memory state; **Saved** reflects changes.
4. **Wildness** meaningfully changes selection (verify by console logging selection reasons).
5. Keyboard shortcuts work and are discoverable via a small legend.
7. Responsive layout and basic a11y (landmarks, focus, labels).

---

## 🚫 Out of Scope (Frontend-only)
- No API routes, no server actions, no DB, no crawler, no auth.
- No analytics or 3rd-party SDKs.

---

## 🧪 Nice-to-Haves (optional if quick)
- Trending pill when `quality*freshness` is high.
- Copy link on Share (`navigator.clipboard`).
- Persist `wildness` to `localStorage`.
- Minimal unit test for `lib/score.ts`.

---

## 📝 Notes for Copilot
- Prefer creating **actual files** under the structure above.
- Keep functions small and typed; add JSDoc on exported functions.
- If uncertain between multiple approaches, favor the one with **fewest dependencies** and **easiest to swap** later.

